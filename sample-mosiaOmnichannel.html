<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Exemplo de recebimento de parâmetro GET</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 20px;
      }

      h1 {
        text-align: center;
      }

      .container {
        max-width: 600px;
        margin: 0 auto;
      }

      .form-group {
        margin-bottom: 10px;
      }

      label {
        display: block;
        font-weight: bold;
        margin-bottom: 5px;
      }

      input[type="text"],
      select {
        width: 100%;
        padding: 8px;
        font-size: 16px;
        border-radius: 4px;
        border: 1px solid #ccc;
      }

      button {
        padding: 10px 20px;
        font-size: 16px;
        background-color: #4CAF50;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      }

      button:hover {
        background-color: #45a049;
      }

      #resultado {
        background-color: #f5f5f5;
        padding: 10px;
        margin-top: 10px;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>Request API MosiaOmnichannel - chavePasse</h1>
      <div class="form-group">
        <label>chavePasse recebida</label>
        <div id="resultado"></div>
      </div>

      <div class="form-group">
        <button onclick="copiarParametros()">Copiar chavePasse</button>
      </div>

      <div class="form-group">
        <label for="urlSelecionada">Selecionar URL:</label>
        <select id="urlSelecionada">
          <option value="url1">Usuario Logado</option>
          <option value="url2">Grupo Familiar</option>
          <option value="url3">Informações do Sistema</option>
        </select>
      </div>

      <div class="form-group">
        <label for="instanciaAppInput">Instância App:</label>
        <select id="instanciaAppInput">
          <option value="1">Produção</option>
          <option value="2">Sandbox</option>
        </select>
      </div>

      <div class="form-group">
        <label for="chavePasseInput">ChavePasse:</label>
        <input type="text" id="chavePasseInput" placeholder="ChavePasse">
      </div>

      <div class="form-group">
        <label for="chaveFuncionalidadeInput">ChaveFuncionalidade:</label>
        <input type="text" id="chaveFuncionalidadeInput" placeholder="ChaveFuncionalidade">
      </div>

      <div class="form-group">
        <label for="Authorization">Authorization:</label>
        <input type="text" id="Authorization" placeholder="Authorization">
      </div>

      <div class="form-group">
        <button onclick="realizarRequest()">Fazer Request</button>
      </div>

      <div class="form-group">
        <div id="retornoApi"></div>
      </div>
      <script>
      // Extrai o valor do parâmetro "chavepasse" da URL
      const urlParams = new URLSearchParams(window.location.search);
      const chavePasse = urlParams.get('chavePasse');

      // Exibe o valor na tela
      const resultadoDiv = document.getElementById('resultado');
      resultadoDiv.innerHTML = chavePasse;
    </script>

    <script>
        function copiarParametros() {
          // Obter a URL atual
          var url = window.location.search;

          // Extrair os parâmetros da URL
          var urlParams = new URLSearchParams(url);

          // Obter o valor do parâmetro chavePasse
          var chavePasse = urlParams.get('chavePasse');

          // Copiar para a área de transferência
          navigator.clipboard.writeText(chavePasse)
            .then(function() {
              console.log('Parâmetros copiados com sucesso!');
            })
            .catch(function(error) {
              console.error('Erro ao copiar parâmetros:', error);
            });
        }
      </script>

    <script>
      function realizarRequest() {
      const instanciaApp = document.getElementById('instanciaAppInput').value;
      console.log(instanciaApp);
      const chavePasse = document.getElementById('chavePasseInput').value;
      const chaveFuncionalidade = document.getElementById('chaveFuncionalidadeInput').value;
      const Authorization = document.getElementById('Authorization').value;
      const urlSelecionada = document.getElementById('urlSelecionada').value;

      const config = {
          headers: {
            'Authorization': `${Authorization}`
          }
        };


      let url

        if (urlSelecionada === 'url1') {
          url = `https://api.mosiaomnichannel.com.br/clientes/chavePasse/usuario?instanciaApp=${instanciaApp}&chavePasse=${chavePasse}&chaveFuncionalidade=${chaveFuncionalidade}`;
        } else if (urlSelecionada === 'url2') {
          url = `https://api.mosiaomnichannel.com.br/clientes/chavePasse/grupoFamiliar?instanciaApp=${instanciaApp}&chavePasse=${chavePasse}&chaveFuncionalidade=${chaveFuncionalidade}`;
        } else if (urlSelecionada === 'url3') {
          url = `https://api.mosiaomnichannel.com.br/clientes/chavePasse/sistema?instanciaApp=${instanciaApp}&chavePasse=${chavePasse}&chaveFuncionalidade=${chaveFuncionalidade}`;
        }

        //  const url = `https://api.mosiaomnichannel.com.br/clientes/chavePasse/usuario?instanciaApp=${instanciaApp}&chavePasse=${chavePasse}&chaveFuncionalidade=${chaveFuncionalidade}`;


      fetch(url,config)
        .then(response => response.json())
        .then(data => {
          console.log(data);
          const jsonFormatted = JSON.stringify(data, null, 2);
          var resultadoDiv = document.getElementById('retornoApi');
            resultadoDiv.innerHTML = '<pre>' + jsonFormatted + '</pre>';
        })
        .catch(error => {
          console.error('Ocorreu um erro:', error);
        });
    }
    </script>
  <body/>
